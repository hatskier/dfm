(function(t){function e(e){for(var a,s,o=e[0],l=e[1],c=e[2],u=0,f=[];u<o.length;u++)s=o[u],i[s]&&f.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},r=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"491d":function(t,e,n){"use strict";var a=n("af6d"),i=n.n(a);i.a},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=n("8c4f"),r=n("e454"),s=n.n(r),o=n("70a1"),l=n.n(o),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("NavBar"),n("router-view",{staticClass:"view"})],1)},d=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"nav-bar"}},[n("div",{staticClass:"mdl-layout mdl-layout--fixed-header"},[n("div",{staticClass:"mdl-layout__header navbarcolour"},[n("div",{staticClass:"mdl-layout__header-row"},[t._m(0),n("div",{staticClass:"mdl-layout-spacer"}),n("nav",{staticClass:"mdl-navigation mdl-layout--large-screen-only"},[n("NavBarLink",{attrs:{name:"debts",defaultRoute:""}}),n("NavBarLink",{attrs:{name:"contacts"}}),n("NavBarLink",{attrs:{name:"shop-lists"}}),n("a",{staticClass:"mdl-navigation__link",on:{click:t.signIn}},[t._v("\n            Sign in\n          ")]),n("a",{staticClass:"mdl-navigation__link",on:{click:t.signOut}},[t._v("\n            Sign out\n          ")])],1)])])])])},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mdl-layout-title"},[a("img",{staticClass:"logo",attrs:{src:n("cf05")}})])}],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:"/"+t.name}},[n("a",{staticClass:"mdl-navigation__link",class:{selected:t.path=="/"+t.name||t.defaultRoute&&"/"==t.path}},[t._v("\n    "+t._s(t.Utils.capitalizeFirst(t.name))+"\n  ")])])},p=[],v=(n("6b54"),{generateId:function(){return Date.now().toString()},capitalizeFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},dictToListWithIds:function(t){var e=[];for(var n in t)e.push(Object.assign({id:n},t[n]));return e}}),h={name:"NavBarLink",data:function(){return{Utils:v}},props:{name:String,defaultRoute:Boolean},computed:{path:function(){return this.$route.fullPath}}},b=h,g=(n("9520"),n("2877")),_=Object(g["a"])(b,m,p,!1,null,"1ec3e0cf",null),y=_.exports,C=n("e4d3"),E=n.n(C),w={name:"NavBar",data:function(){var t=new E.a.AppConfig(["store_write","publish_data"]);return{userSession:new E.a.UserSession({appConfig:t})}},computed:{path:function(){return this.$route.fullPath}},components:{NavBarLink:y},methods:{signIn:function(){this.userSession.redirectToSignIn()},signOut:function(){this.userSession.signOut()}}},k=w,O=(n("9061"),Object(g["a"])(k,u,f,!1,null,"74a1009d",null)),x=O.exports,T={name:"app",components:{NavBar:x}},$=T,j=(n("5c0b"),Object(g["a"])($,c,d,!1,null,null,null)),S=j.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"centered"},[t._v("Contacts")]),n("EditableListTemplate",{attrs:{elements:t.elements,dataModel:t.dataModel,addable:!0,editable:!0,upsert:t.state.upsertContact.bind(t.state),remove:t.state.removeContact.bind(t.state)}})],1)},M=[],B=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticClass:"mdl-data-table mdl-shadow--2dp centered"},[n("thead",[n("tr",[t._l(t.fields,function(e){return n("th",{key:e},[t._v("\n          "+t._s(t.Utils.capitalizeFirst(e))+"\n        ")])}),t.editable?n("th"):t._e()],2)]),n("tbody",t._l(t.elements,function(e){return n("EditableListElement",{key:e.id,attrs:{data:e,dataModel:t.dataModel,editable:t.editable,removable:t.removable,startWithEditing:e.id==t.idOfEditingElement,upsert:t.upsert,remove:t.remove}})}),1)]),n("div",{staticClass:"add-button-container"},[t.addable?n("button",{staticClass:"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-color--green-200",attrs:{type:"button"},on:{click:t.addNew}},[n("span",{staticClass:"material-icons"},[t._v("add")])]):t._e()])])}),N=[],R=(n("ac6a"),n("456d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[t._l(t.fields,function(e){return n("td",{key:e},["checkbox"===t.getType(e)&&t.editing&&"ref"!==t.getType(e)&&"link"!==t.getType(e)?n("input",{directives:[{name:"model",rawName:"v-model",value:t.data[e],expression:"data[field]"}],staticClass:"mdl-textfield__input",attrs:{id:e,type:"checkbox"},domProps:{checked:Array.isArray(t.data[e])?t._i(t.data[e],null)>-1:t.data[e]},on:{change:function(n){var a=t.data[e],i=n.target,r=!!i.checked;if(Array.isArray(a)){var s=null,o=t._i(a,s);i.checked?o<0&&t.$set(t.data,e,a.concat([s])):o>-1&&t.$set(t.data,e,a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.data,e,r)}}}):"radio"===t.getType(e)&&t.editing&&"ref"!==t.getType(e)&&"link"!==t.getType(e)?n("input",{directives:[{name:"model",rawName:"v-model",value:t.data[e],expression:"data[field]"}],staticClass:"mdl-textfield__input",attrs:{id:e,type:"radio"},domProps:{checked:t._q(t.data[e],null)},on:{change:function(n){return t.$set(t.data,e,null)}}}):t.editing&&"ref"!==t.getType(e)&&"link"!==t.getType(e)?n("input",{directives:[{name:"model",rawName:"v-model",value:t.data[e],expression:"data[field]"}],staticClass:"mdl-textfield__input",attrs:{id:e,type:t.getType(e)},domProps:{value:t.data[e]},on:{input:function(n){n.target.composing||t.$set(t.data,e,n.target.value)}}}):t._e(),t.editing&&"ref"==t.getType(e)?n("select",{directives:[{name:"model",rawName:"v-model",value:t.data[e],expression:"data[field]"}],attrs:{id:e},on:{change:function(n){var a=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.data,e,n.target.multiple?a:a[0])}}},t._l(t.getRefVals(e),function(a){return n("option",{key:a.id,domProps:{value:a.id}},[t._v("\n        "+t._s(t.getRefTitle(a.id,e))+"\n      ")])}),0):t._e(),"link"==t.getType(e)?n("a",{attrs:{href:t.data[e]}},[t._v("Go")]):t._e(),t.editing||"ref"==t.getType(e)||"link"===t.getType(e)?t._e():n("span",[t._v("\n      "+t._s(t.data[e])+"\n    ")]),t.editing||"ref"!=t.getType(e)?t._e():n("span",[t._v("\n      "+t._s(t.getRefTitle(t.data[e],e))+"\n    ")])])}),t.editable?n("td",[t.editing?t._e():n("a",{attrs:{href:"#"},on:{click:t.startEditing}},[n("span",{staticClass:"material-icons"},[t._v("edit")])]),t.editing?n("a",{attrs:{href:"#"},on:{click:t.stopEditing}},[n("span",{staticClass:"material-icons"},[t._v("save")])]):t._e(),t.removable?n("a",{attrs:{href:"#"},on:{click:t.removeElement}},[n("span",{staticClass:"material-icons"},[t._v("delete")])]):t._e()]):t._e()],2)}),A=[],D=(n("7514"),n("7618")),I={name:"EditableListTemplate",data:function(){return{editing:this.startWithEditing,getType:function(t){var e=this.dataModel[t];switch(e){case"String":return"text";case"Date":return"datetime-local";case"Money":return"number";case"Link":return"link";default:return"object"==Object(D["a"])(e)&&"Reference"==e.kind?"ref":"text"}},getRefVals:function(t){if("ref"!==this.getType(t))throw"Can not get ref vals from non-reference";return this.dataModel[t].refCollection},getRefTitle:function(t,e){var n=this.getRefVals(e),a=n.find(function(e){return e.id==t});return a?a.name:""}}},props:{data:Object,dataModel:Object,editable:Boolean,removable:Boolean,startWithEditing:Boolean,upsert:Function,remove:Function},computed:{fields:function(){return Object.keys(this.dataModel)}},methods:{startEditing:function(){this.editing=!0},stopEditing:function(){this.upsert(this.data),this.editing=!1},removeElement:function(){var t=confirm("Are you sure you want to delete element with id: "+this.data.id);t&&this.remove(this.data)}}},P=I,F=(n("9548"),Object(g["a"])(P,R,A,!1,null,"5d390da0",null)),U=F.exports,W={name:"EditableListTemplate",props:{elements:Array,dataModel:Object,addable:Boolean,editable:Boolean,removable:Boolean,upsert:Function,remove:Function},data:function(){return{idOfEditingElement:null,Utils:v}},components:{EditableListElement:U},computed:{fields:function(){return Object.keys(this.dataModel)}},methods:{addNew:function(){var t=this.upsert({});this.idOfEditingElement=t.id}}},z=W,V=(n("b4a1"),Object(g["a"])(z,B,N,!1,null,"b2ae5708",null)),J=V.exports,Y=(n("c5f6"),n("2ef0")),q=n.n(Y),G={contacts:{},debts:{},upsertContact:function(t){return this.defaultUpsert(t,"contacts","Contact")},removeContact:function(t){this.defaultRemove(t,"contacts","Contact")},upsertDebt:function(t){return t.amount=Number(t.amount),this.defaultUpsert(t,"debts","Debt")},removeDebt:function(t){this.defaultRemove(t,"debts","Debt")},defaultUpsert:function(t,e,n){console.log("Updating ".concat(n)),console.log(t),t.id||(t.id=v.generateId());var i=q.a.clone(t);return a["a"].set(this[e],t.id,i),i},defaultRemove:function(t,e,n){if(!t.id)throw new Error("".concat(n," without id can not be removed"));console.log("Removing ".concat(n)),console.log(t);var i=q.a.clone(this[e]);delete i[t.id],a["a"].set(this,e,i)}},H=G;H.upsertContact({name:"Random"+Math.round(1e5*Math.random()),email:"email@gmail.com",phone:Math.round(1e9*Math.random()).toString()});var K={name:"Contacts",data:function(){return{dataModel:{name:"String",email:"String",phone:"String",debts:"Link"},state:H}},computed:{elements:function(){var t=v.dictToListWithIds(this.state.contacts);return t.map(function(t){return t.debts="/#/debts/".concat(t.name),t})}},methods:{},components:{EditableListTemplate:J}},Q=K,X=(n("a502"),Object(g["a"])(Q,L,M,!1,null,"4546efce",null)),Z=X.exports,tt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"centered"},[t._v("Dashboard")]),n("p",{staticClass:"centered"},[t._v("\n    Dashboard will contain notifications about debts\n    and other interesting statistics. It is not implemented yet.\n  ")])])}],nt={name:"Dashboard",props:{}},at=nt,it=Object(g["a"])(at,tt,et,!1,null,"4311b9b4",null),rt=it.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"centered"},[t._v("Debts "+t._s(t.contact?" - "+t.contact:""))]),n("div",{staticClass:"cards mdl-grid"},[n("Card",{attrs:{id:"total",value:t.totalBalance,label:"Total balance",color:"#1A8FE2",icon:"money",suffix:"$"}}),n("Card",{attrs:{id:"youowe",value:t.youOwe,label:"You owe",icon:"money_off",color:"#1A8FE2",suffix:"$"}}),n("Card",{attrs:{id:"youareowed",value:t.youAreOwed,label:"You are owed",icon:"attach_money",color:"#1A8FE2",suffix:"$"}}),n("Card",{attrs:{id:"debtslength",value:t.debtsLength,label:"Number of debts",icon:"list",color:"#1A8FE2",suffix:"pos"}})],1),n("EditableListTemplate",{attrs:{elements:t.elements,dataModel:t.dataModel,addable:!0,editable:!0,removable:!0,upsert:t.state.upsertDebt.bind(t.state),remove:t.state.removeDebt.bind(t.state)}})],1)},ot=[],lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mdl-cell mdl-cell--3-col"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-5"},[n("i",{staticClass:"material-icons"},[t._v(t._s(t.icon))])]),n("div",{staticClass:"col-7"},[n("div",{staticClass:"numbers"},[n("div",[n("h4",{staticClass:"card-title"},[t._v(t._s(t.value)+" "+t._s(t.suffix))])])])])])]),n("div",{staticClass:"card-footer"},[n("hr"),n("div",{staticClass:"stats"},[n("div",[n("i",{staticClass:"fa fa-refresh"}),t._v("\n                  "+t._s(t.label)+"\n              ")])])])])])},ct=[],dt={name:"Card",props:{value:Number,label:String,icon:String,color:String,suffix:String}},ut=dt,ft=(n("bee7"),Object(g["a"])(ut,lt,ct,!1,null,"aeba2c9e",null)),mt=ft.exports,pt={name:"Debts",data:function(){return{state:H}},computed:{contact:function(){return this.$route.params.contact},elements:function(){var t=this,e=v.dictToListWithIds(this.state.debts);if(console.log(this.$route),this.$route.params.contact){var n=v.dictToListWithIds(this.state.contacts).find(function(e){return e.name==t.$route.params.contact});n&&(e=e.filter(function(t){return t.contact==n.id}))}return e},dataModel:function(){return{contact:{kind:"Reference",refCollection:v.dictToListWithIds(this.state.contacts)},amount:"Money",title:"String",description:"String",reminder:"Date"}},totalBalance:function(){return-this.elements.reduce(function(t,e){return e.amount?t+e.amount:t},0)},debtsLength:function(){return this.elements.length},youOwe:function(){return this.elements.reduce(function(t,e){return e.amount>0?t+e.amount:t},0)},youAreOwed:function(){return-1*this.elements.reduce(function(t,e){return e.amount&&e.amount<0?t+e.amount:t},0)}},components:{EditableListTemplate:J,Card:mt}},vt=pt,ht=(n("491d"),Object(g["a"])(vt,st,ot,!1,null,"31e63cb8",null)),bt=ht.exports,gt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_t=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Incomings")])])}],yt={name:"Incomings",props:{}},Ct=yt,Et=Object(g["a"])(Ct,gt,_t,!1,null,"13da8fab",null),wt=Et.exports,kt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ot=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Shopping list")])])}],xt={name:"ShoppingList",props:{name:String}},Tt=xt,$t=Object(g["a"])(Tt,kt,Ot,!1,null,"eb9fa79c",null),jt=$t.exports,St=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Lt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",{staticClass:"centered"},[t._v("Shopping Lists - to be implemented")])])}],Mt={name:"ShoppingLists",props:{}},Bt=Mt,Nt=Object(g["a"])(Bt,St,Lt,!1,null,"d5fe928e",null),Rt=Nt.exports;a["a"].config.productionTip=!1,a["a"].use(i["a"]),a["a"].use(s.a),a["a"].directive("mdl",{inserted:function(t){return l.a.componentHandler.upgradeElement(t)}});var At=[{path:"/contacts",component:Z},{path:"/",component:bt},{path:"/dashboard",component:rt},{path:"/debts",component:bt},{path:"/debts/:contact",component:bt},{path:"/incomings",component:wt},{path:"/shop-list",component:jt},{path:"/shop-lists",component:Rt}],Dt=new i["a"]({routes:At}),It=new a["a"]({router:Dt,render:function(t){return t(S)}}).$mount("#app");e["default"]=It},"5c0b":function(t,e,n){"use strict";var a=n("5e27"),i=n.n(a);i.a},"5e27":function(t,e,n){},"7cd3":function(t,e,n){},"800a":function(t,e,n){},9061:function(t,e,n){"use strict";var a=n("d628"),i=n.n(a);i.a},9520:function(t,e,n){"use strict";var a=n("b4a0"),i=n.n(a);i.a},9548:function(t,e,n){"use strict";var a=n("dcda"),i=n.n(a);i.a},a502:function(t,e,n){"use strict";var a=n("d30c"),i=n.n(a);i.a},af6d:function(t,e,n){},b4a0:function(t,e,n){},b4a1:function(t,e,n){"use strict";var a=n("7cd3"),i=n.n(a);i.a},bee7:function(t,e,n){"use strict";var a=n("800a"),i=n.n(a);i.a},cf05:function(t,e,n){t.exports=n.p+"img/logo.830e41fb.png"},d30c:function(t,e,n){},d628:function(t,e,n){},dcda:function(t,e,n){}});
//# sourceMappingURL=app.1703c146.js.map